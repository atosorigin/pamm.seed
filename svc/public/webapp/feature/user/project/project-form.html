<form name="projectForm" data-ng-controller="projectFormCtrl as p" class="container-fluid"
      data-ng-submit="p.saveProject(projectForm)" method="post" novalidate="novalidate">
  <h1 class="row">{{p.headingText}}</h1>
  <div class="row">
    <div class="col-md-6">
      <div class='form-group'>
        <label for="title" class="required">Title</label>
        <input type="text" class="form-control" data-ng-model="p.project.title" minlength="5"
               placeholder="Project Title" id="title" name="title" required autofocus>
        <div data-ng-messages="projectForm.title.$error" data-ng-if="projectForm.$submitted" role="alert">
          <div data-ng-message="required">Please enter a title for your project</div>
          <div data-ng-message="minlength">Please enter a more descriptive title of at least 5 characters</div>
        </div>
      </div>

      <div class='form-group'>
        <label for="projectCode" class="required">Project Code</label>
        <input type="text" class="form-control" data-ng-model="p.project.projectCode"
               placeholder="The code for this project" id="projectCode" name="projectCode" required>
        <div data-ng-messages="projectForm.projectCode.$error" data-ng-if="projectForm.$submitted" role="alert">
          <div data-ng-message="required">Please enter the code for this project</div>
        </div>
      </div>

      <div class='form-group'>
        <label for="Client">Client</label>
        <input type="text" class="form-control" data-ng-model="p.project.client"
               placeholder="The clent for this project" id="client">
      </div>

      <div class='form-group'>
        <label for="summary" class="required">Summary</label>
        <textarea class="form-control" rows="3" data-ng-model="p.project.summary"
                  placeholder="Enter a brief description for the project" id="summary" name="summary" required>
        </textarea>
        <div data-ng-messages="projectForm.summary.$error" data-ng-if="projectForm.$submitted" role="alert">
          <div data-ng-message="required">Please enter a summary for your project</div>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div>
        <label>Project Members</label>
        <button type="button" class="btn btn-default btn-xs pull-right" title="Add a project team member"
                data-ng-click="p.addMember()">
          <i class="fa fa-plus"></i>&nbsp;Add project Member
        </button>
      </div>
      <div class="list-group">
        <div class="list-group-item"
             data-ng-repeat="member in p.project.members| filter: {userId:'!' + project.ownerId, sessionStatus: '!REMOVED'}| orderBy:'email' track by $index">
          <{{member.email}}>&nbsp;{{member.forename}} {{member.surname}}
          <a class="fa fa-close pull-right" title="Remove this member from the project"
             data-ng-click="p.removeMember(member)"></a>
        </div>
      </div>

      <div class="alert alert-info" data-ng-if="!p.hasMembers()">
        <i class="fa fa-info-circle">&nbsp;;</i>There are currently no project team members
      </div>
    </div>
  </div>

  <footer class="row">
    <div class="pull-right">
      <button type="button" data-ng-click="p.cancel()" class="btn btn-cancel">Cancel</button>
      <button type="submit" class="btn btn-primary">Save</button>
    </div>
  </footer>
</form>
